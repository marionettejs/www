<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Marionette.Application : Documentation</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="assets_/css/shCore.css">
        <link rel="stylesheet" href="assets_/css/shThemeDefault.css">
        <link rel="stylesheet" href="assets_/css/main.css">
    </head>
    <body>
        <div id="wrapper">
            <div id="content">

<h1>Marionette.Application</h1>

<p>The <code>Backbone.Marionette.Application</code> object is the hub of your composite 
application. It organizes, initializes and coordinates the various pieces of your
app. It also provides a starting point for you to call into, from your HTML 
script block or from your JavaScript files directly if you prefer to go that 
route.</p>

<p>The <code>Application</code> is meant to be instantiated directly, although you can extend
it to add your own functionality.</p>

<pre class="brush:js">

MyApp = new Backbone.Marionette.Application();
</pre>

<h2>Table of Contents <a href="#toc" name="toc" class="deep-link">#</a></h2>

<ul>
<li><a href="#Documentation Index">Documentation Index</a></li>
<li><a href="#Adding Initializers">Adding Initializers</a></li>
<li><a href="#Application Event">Application Event</a></li>
<li><a href="#Starting An Application">Starting An Application</a></li>
<li><a href="#app.vent">app.vent</a></li>
<li><a href="#Regions And The Application Object">Regions And The Application Object</a></li>
</ul>

<h2>Documentation Index <a href="#Documentation Index" id="Documentation Index" class="deep-link">#</a></h2>

<ul>
<li><a href="#adding-initializers">Adding Initializers</a></li>
<li><a href="#application-event">Application Event</a></li>
<li><a href="#starting-an-application">Starting An Application</a></li>
<li><a href="#appvent-event-aggregator">app.vent: Event Aggregator</a></li>
<li><a href="#regions-and-the-application-object">Regions And The Application Object</a>
<ul><li><a href="#jquery-selector">jQuery Selector</a></li>
<li><a href="#custom-region-type">Custom Region Type</a></li>
<li><a href="#custom-region-type-and-selector">Custom Region Type And Selector</a></li>
<li><a href="#removing-regions">Removing Regions</a></li></ul></li>
</ul>

<h2>Adding Initializers <a href="#Adding Initializers" id="Adding Initializers" class="deep-link">#</a></h2>

<p>Your application needs to do useful things, like displaying content in your
regions, starting up your routers, and more. To accomplish these tasks and
ensure that your <code>Application</code> is fully configured, you can add initializer
callbacks to the application.</p>

<pre class="brush:js">

MyApp.addInitializer(function(options){
  // do useful stuff here
  var myView = new MyView({
    model: options.someModel
  });
  MyApp.mainRegion.show(myView);
});

MyApp.addInitializer(function(options){
  new MyAppRouter();
  Backbone.history.start();
});
</pre>

<p>These callbacks will be executed when you start your application,
and are bound to the application object as the context for
the callback. In other words, <code>this</code> is the <code>MyApp</code> object, inside
of the initializer function.</p>

<p>The <code>options</code> parameters is passed from the <code>start</code> method (see below).</p>

<p>Initializer callbacks are guaranteed to run, no matter when you
add them to the app object. If you add them before the app is
started, they will run when the <code>start</code> method is called. If you
add them after the app is started, they will run immediately.</p>

<h2>Application Event <a href="#Application Event" id="Application Event" class="deep-link">#</a></h2>

<p>The <code>Application</code> object raises a few events during its lifecycle, using the
<a href="./marionette.functions.md">Marionette.triggerMethod</a> function. These events
can be used to do additional processing of your application. For example, you
may want to pre-process some data just before initialization happens. Or you may
want to wait until your entire application is initialized to start the
<code>Backbone.history</code>.</p>

<p>The events that are currently triggered, are:</p>

<ul>
<li><em>*"initialize:before" / <code>onInitializeBefore</code> *</em>: fired just before the initializers kick off</li>
<li><em>*"initialize:after" / <code>onInitializeAfter</code> *</em>: fires just after the initializers have finished</li>
<li><strong>"start" / <code>onStart</code></strong>: fires after all initializers and after the initializer events</li>
</ul>

<pre class="brush:js">

MyApp.on("initialize:before", function(options){
  options.moreData = "Yo dawg, I heard you like options so I put some options in your options!"
});

MyApp.on("initialize:after", function(options){
  if (Backbone.history){
    Backbone.history.start();
  }
});
</pre>

<p>The <code>options</code> parameter is passed through the <code>start</code> method of the application
object (see below).</p>

<h2>Starting An Application <a href="#Starting An Application" id="Starting An Application" class="deep-link">#</a></h2>

<p>Once you have your application configured, you can kick everything off by 
calling: <code>MyApp.start(options)</code>.</p>

<p>This function takes a single optional parameter. This parameter will be passed
to each of your initializer functions, as well as the initialize events. This
allows you to provide extra configuration for various parts of your app, at
initialization/start of the app, instead of just at definition.</p>

<pre class="brush:js">

var options = {
  something: "some value",
  another: "#some-selector"
};

MyApp.start(options);
</pre>

<h2>app.vent: Event Aggregator <a href="#app.vent" id="app.vent" class="deep-link">#</a></h2>

<p>Every application instance comes with an instance of <code>Marionette.EventAggregator</code> 
called <code>app.vent</code>.</p>

<pre class="brush:js">

MyApp = new Backbone.Marionette.Application();

MyApp.vent.on("foo", function(){
  alert("bar");
});

MyApp.vent.trigger("foo"); // => alert box "bar"
</pre>

<p>See the <a href="./marionette.eventaggregator.md"><code>Marionette.EventAggregator</code></a> documentation for more details.</p>

<h2>Regions And The Application Object <a href="#Regions And The Application Object" id="Regions And The Application Object" class="deep-link">#</a></h2>

<p>Marionette's <code>Region</code> objects can be directly added to an application by
calling the <code>addRegions</code> method.</p>

<p>There are three syntax forms for adding a region to an application object.</p>

<h3>jQuery Selector</h3>

<p>The first is to specify a jQuery selector as the value of the region
definition. This will create an instance of a Marionette.Region directly,
and assign it to the selector:</p>

<pre class="brush:js">

MyApp.addRegions({
  someRegion: "#some-div",
  anotherRegion: "#another-div"
});
</pre>

<h3>Custom Region Type</h3>

<p>The second is to specify a custom region type, where the region type has
already specified a selector:</p>

<pre class="brush:js">

MyCustomRegion = Marionette.Region.extend({
  el: "#foo"
});

MyApp.addRegions({
  someRegion: MyCustomRegion
});
</pre>

<h3>Custom Region Type And Selector</h3>

<p>The third method is to specify a custom region type, and a jQuery selector
for this region instance, using an object literal:</p>

<pre class="brush:js">

MyCustomRegion = Marionette.Region.extend({});

MyApp.addRegions({

  someRegion: {
    selector: "#foo",
    regionType: MyCustomRegion
  },

  anotherRegion: {
    selector: "#bar",
    regionType: MyCustomRegion
  }

});
</pre>

<h3>Removing Regions</h3>

<p>Regions can also be removed with the <code>removeRegion</code> method, passing in 
the name of the region to remove as a string value:</p>

<pre class="brush:js">

MyApp.removeRegion('someRegion');
</pre>

<p>Removing a region will properly close it before removing it from the
application object.</p>

<p>For more information on regions, see <a href="./marionette.region.md">the region documentation</a></p>
            </div>
        </div>
        <script src="assets_/js/lib/jquery.js"></script>
        <script src="assets_/js/lib/syntax-highlighter/shCore.js"></script>
        <script src="assets_/js/lib/syntax-highlighter/shAutoloader.js"></script>
        <script src="assets_/js/main.js"></script>
    </body>
</html>

